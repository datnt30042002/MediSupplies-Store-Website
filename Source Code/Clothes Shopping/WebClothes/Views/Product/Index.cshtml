@model IEnumerable<DTOLibrary.Models.Product>

@{
    ViewData["Title"] = "Product";
    Layout = null;
}

<!doctype html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    @*<title>Clothing Online Shop</title>*@
    <title>Doctris - Doctor Appointment Booking System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Premium Bootstrap 4 Landing Page Template" />
    <meta name="keywords" content="Appointment, Booking, System, Dashboard, Health" />
    <meta name="author" content="Shreethemes" />
    <meta name="email" content="support@shreethemes.in" />
    <meta name="website" content="https://shreethemes.in" />
    <meta name="Version" content="v1.2.0" />
    <!-- favicon -->
    <link rel="shortcut icon" href="/lib/images/favicon.ico.png">
    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons -->
    <link href="/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link href="/css/remixicon.css" rel="stylesheet" type="text/css" />
    <link href="https://unicons.iconscout.com/release/v3.0.6/css/line.css" rel="stylesheet">
    <!-- Css -->
    <link href="/css/style.min.css" rel="stylesheet" type="text/css" id="theme-opt" />

</head>

<body>

    <!-- Navbar STart -->
    <header id="topnav" class="defaultscroll sticky">
        <div b-skjwban1nq class="container">
            <!-- Logo container-->
            <a b-skjwban1nq class="logo" href="/">
                <img b-skjwban1nq src="/lib/images/logo-dark.png" height="24" class="logo-light-mode" alt="">
                <img b-skjwban1nq src="/lib/images/logo-light.png" height="24" class="logo-dark-mode" alt="">
            </a>
            <!-- Logo End -->
            <!-- Start Mobile Toggle -->
            <div b-skjwban1nq class="menu-extras">
                <div b-skjwban1nq class="menu-item">
                    <!-- Mobile menu toggle-->
                    <a b-skjwban1nq class="navbar-toggle" id="isToggle" onclick="toggleMenu()">
                        <div b-skjwban1nq class="lines">
                            <span b-skjwban1nq></span>
                            <span b-skjwban1nq></span>
                            <span b-skjwban1nq></span>
                        </div>
                    </a>
                    <!-- End mobile menu toggle-->
                </div>
            </div>
            <!-- End Mobile Toggle -->


            <div b-skjwban1nq id="navigation">
                <!-- Navigation Menu-->
                <ul b-skjwban1nq class="navigation-menu nav-left">
                    <li b-skjwban1nq class="has-submenu parent-menu-item">
                        <a b-skjwban1nq href="javascript:void(0)">Products</a><span b-skjwban1nq class="menu-arrow"></span>
                        <ul b-skjwban1nq class="submenu">
                            <li b-skjwban1nq><a b-skjwban1nq href="/Guest" class="sub-menu-item">Shop</a></li>
                        </ul>
                    </li>
                    <li b-skjwban1nq class="has-submenu parent-menu-item">
                        <a b-skjwban1nq href="javascript:void(0)">Orders</a><span b-skjwban1nq class="menu-arrow"></span>
                        <ul b-skjwban1nq class="submenu">
                            <li b-skjwban1nq><a b-skjwban1nq href="/Cart" class="sub-menu-item">Shop Cart</a></li>
                            <li b-skjwban1nq><a b-skjwban1nq href="/Cart/Myorder" class="sub-menu-item">My Orders</a></li>
                        </ul>
                    </li>
                    <li b-skjwban1nq class="has-submenu parent-menu-item">
                        <a b-skjwban1nq href="javascript:void(0)">Accounts</a><span b-skjwban1nq class="menu-arrow"></span>
                        <ul b-skjwban1nq class="submenu">
                            <li b-skjwban1nq><a b-skjwban1nq href="/Cart" class="sub-menu-item">Manager Accounts</a></li>
                        </ul>
                    </li>
                </ul><!--end navigation menu-->
            </div><!--end navigation-->
        </div><!--end container-->
    </header><!--end header-->
    <!-- Navbar End -->

    <div class="page-wrapper doctris-theme">
        <!-- Start Page Content -->
        <main class="page-content bg-light">
            <div class="container-fluid">
                <div class="layout-specing">
                    <br>
                    <br>
                    <br>
                    <h2>Manager Products</h2>

                    <form asp-controller="Product" asp-action="Index" method="get" class="my-5">
                        <div class="form-row col-12">
                            <div class="form-group col-md-4">
                                <label for="category">Category</label>
                                <select id="category" name="categoryId" asp-items="ViewBag.Category" class="form-control">
                                    <option value="">All</option>
                                </select>
                            </div>

                            <div class="form-group col-md-4">
                                <label for="product-status">Status</label>
                                <select name="status" id="product-status" class="form-control">
                                    <option value="">All</option>
                                    <option value="true">Active</option>
                                    <option value="false">Inactive</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary col-md-2 ml-3">Filter</button>
                    </form>

                    <p>
                        <a asp-action="Create" class="btn btn-success ml-3">Add new product  <i class="fas fa-plus"></i></a>
                    </p>

                    <div class="d-md-flex justify-content-between">
                        <h5 class="mb-0">Patients List</h5>
                    </div>

                    <div class="row">
                        <div class="col-12 mt-4">
                            <div class="table-responsive shadow rounded">
                                <table class="table table-center bg-white mb-0">
                                    <thead>
                                        <tr>
                                            <th class="border-bottom p-3" style="min-width: 50px;"></th>
                                            <th class="border-bottom p-3" style="min-width: 180px;">Product</th>
                                            <th class="border-bottom p-3">Price</th>
                                            <th class="border-bottom p-3">Quantity</th>
                                            <th class="border-bottom p-3" style="min-width: 10px;">Status</th>
                                            <th class="border-bottom p-3">Category</th>
                                            <th class="border-bottom p-3"></th>
                                            <th class="border-bottom p-3" style="min-width: 100px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
        {
                                        <tr>
                                            <th class="p-3"></th>
                                            <td class="py-3">
                                                <a href="#" class="text-dark">
                                                    <div class="d-flex align-items-center">
                                                            <img src="@Html.DisplayFor(modelItem => item.Image)" class="avatar avatar-md-sm rounded-circle shadow" alt="">
                                                            <span class="ms-2"> @Html.DisplayFor(modelItem => item.ProductName) </span>
                                                    </div>
                                                </a>
                                            </td>
                                            
                                            <td class="p-3">$@Html.DisplayFor(modelItem => item.Price)</td>
                                            <td class="p-3">@Html.DisplayFor(modelItem => item.Quantity)</td>

                                            <td class="text-end p-3">
                                                @if (item.Status == true)
                                                {
                                                    <span>Active</span>
                                                }
                                                else
                                                {
                                                    <span>Unactive</span>
                                                }
                                            </td>


                                            <td class="p-3">@Html.DisplayFor(modelItem => item.Category.CategoryName)</td>

                                            <td class="text-end p-3">
                                                    <a asp-action="Edit" asp-route-id="@item.ProductId" class="btn btn-outline-light">Edit</a>

                                                    <button onclick="showDeleteConfirmation(@item.ProductId)" class="btn btn-outline-light">
                                                        <form asp-action="Delete" asp-route-id="@item.ProductId" method="post">
                                                            <input type="submit" value="Delete" />
                                                        </form>
                                                    </button>

                                            </td>
                                        </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div><!--end row-->

                    <div class="row text-center">
                        <!-- PAGINATION START -->
                        <div class="col-12 mt-4">
                            <div class="d-md-flex align-items-center text-center justify-content-between">
                                <span class="text-muted me-3">Showing 1 - 10 out of 50</span>
                                <ul class="pagination justify-content-center mb-0 mt-3 mt-sm-0">
                                    <li class="page-item"><a class="page-link" href="javascript:void(0)" aria-label="Previous">Prev</a></li>
                                    <li class="page-item active"><a class="page-link" href="javascript:void(0)">1</a></li>
                                    <li class="page-item"><a class="page-link" href="javascript:void(0)">2</a></li>
                                    <li class="page-item"><a class="page-link" href="javascript:void(0)">3</a></li>
                                    <li class="page-item"><a class="page-link" href="javascript:void(0)" aria-label="Next">Next</a></li>
                                </ul>
                            </div>
                        </div><!--end col-->
                        <!-- PAGINATION END -->
                    </div><!--end row-->
                </div>
            </div><!--end container-->
            <!-- Footer Start -->
            <!-- Start Footer -->
            <footer class="bg-footer py-4">
                <div class="container-fluid">
                    <div class="row align-items-center">
                        <div class="col-sm-6">
                            <div class="text-sm-start text-center">
                                <p class="mb-0"><script>document.write(new Date().getFullYear())</script> © Doctris. Design with <i class="mdi mdi-heart text-danger"></i> by <a href="../../../index.html" target="_blank" class="text-reset">Shreethemes</a>.</p>
                            </div>
                        </div><!--end col-->

                        <div class="col-sm-6 mt-4 mt-sm-0">
                            <ul class="list-unstyled footer-list text-sm-end text-center mb-0">
                                <li class="list-inline-item"><a href="terms.html" class="text-foot me-2">Terms</a></li>
                                <li class="list-inline-item"><a href="privacy.html" class="text-foot me-2">Privacy</a></li>
                                <li class="list-inline-item"><a href="aboutus.html" class="text-foot me-2">About</a></li>
                                <li class="list-inline-item"><a href="contact.html" class="text-foot me-2">Contact</a></li>
                            </ul>
                        </div><!--end col-->
                    </div><!--end row-->
                </div><!--end container-->
            </footer><!--end footer-->
            <!-- End Footer -->
            <!-- javascript -->
            <script src="../assets/libs/feather-icons/feather.min.js"></script>
            <!-- Main Js -->
            <!-- JAVASCRIPT -->
            <script src="../assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
            <script src="../assets/js/plugins.init.js"></script>
            <script src="../assets/js/app.js"></script>
</body>
</html>
<script>
    function showDeleteConfirmation(productId) {
        var confirmation = confirm("Are you sure you want to delete this product?");
        if (confirmation) {
            // If the user confirms, submit the form to delete the product
            var form = document.createElement('form');
            form.method = 'post';
            form.action = '/Product'; // Replace this with the appropriate URL for your delete action

            var input = document.createElement('input');
            input.type = 'hidden';
            input.name = 'ProductId';
            input.value = productId;

            form.appendChild(input);

            document.body.appendChild(form);
            form.submit();
        }
    }
</script>